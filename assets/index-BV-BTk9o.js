const __vite__fileDeps=["assets/Container-Kobb2VSv.js","assets/NumberUtils-fSLHzFkB.js","assets/TypeUtils-BOyOcFPO.js","assets/Utils-B52he1Wb.js","assets/CanvasUtils-naQ4Jb_L.js","assets/ColorUtils-Cn7nrMWp.js","assets/OptionsColor-BU8TyMFV.js","assets/ValueWithRandom-CjXDGkOM.js","assets/Ranges-DArkZDAG.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as D,r as L,j as k}from"./index-D75a7VYo.js";import{g as O,a as g,e as C,b as h,p as P}from"./NumberUtils-fSLHzFkB.js";import{e as _,i as x,g as z,a as A}from"./Utils-B52he1Wb.js";import{h as E,a as S,b as y}from"./ColorUtils-Cn7nrMWp.js";import"./TypeUtils-BOyOcFPO.js";class R{constructor(){this._listeners=new Map}addEventListener(e,s){this.removeEventListener(e,s);let t=this._listeners.get(e);t||(t=[],this._listeners.set(e,t)),t.push(s)}dispatchEvent(e,s){const t=this._listeners.get(e);t==null||t.forEach(r=>r(s))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,s){const t=this._listeners.get(e);if(!t)return;const r=t.length,n=t.indexOf(s);if(n<0)return;const l=1;r===l?this._listeners.delete(e):t.splice(n,l)}}async function p(i,e,s,t=!1){let r=e.get(i);return(!r||t)&&(r=await Promise.all([...s.values()].map(n=>n(i))),e.set(i,r)),r}async function G(i){const e=x(i.url,i.index);if(!e)return i.fallback;const s=await fetch(e);return s.ok?await s.json():(z().error(`${C} ${s.status} while retrieving config file`),i.fallback)}class V{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new R,this._initialized=!1,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this.pathGenerators=new Map}get configs(){const e={};for(const[s,t]of this._configs)e[s]=t;return e}get version(){return"3.3.0"}addConfig(e){const s=e.key??e.name??"default";this._configs.set(s,e),this._eventDispatcher.dispatchEvent("configAdded",{data:{name:s,config:e}})}async addEffect(e,s,t=!0){_(e,r=>{this.getEffectDrawer(r)||this.effectDrawers.set(r,s)}),await this.refresh(t)}addEventListener(e,s){this._eventDispatcher.addEventListener(e,s)}async addInteractor(e,s,t=!0){this._initializers.interactors.set(e,s),await this.refresh(t)}async addMover(e,s,t=!0){this._initializers.movers.set(e,s),await this.refresh(t)}async addParticleUpdater(e,s,t=!0){this._initializers.updaters.set(e,s),await this.refresh(t)}async addPathGenerator(e,s,t=!0){this.getPathGenerator(e)||this.pathGenerators.set(e,s),await this.refresh(t)}async addPlugin(e,s=!0){this.getPlugin(e.id)||this.plugins.push(e),await this.refresh(s)}async addPreset(e,s,t=!1,r=!0){(t||!this.getPreset(e))&&this.presets.set(e,s),await this.refresh(r)}async addShape(e,s,t=!0){_(e,r=>{this.getShapeDrawer(r)||this.shapeDrawers.set(r,s)}),await this.refresh(t)}clearPlugins(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}dispatchEvent(e,s){this._eventDispatcher.dispatchEvent(e,s)}dom(){return this._domArray}domItem(e){const s=this.dom(),t=s[e];if(!t||t.destroyed){s.splice(e,1);return}return t}async getAvailablePlugins(e){const s=new Map;for(const t of this.plugins)t.needsPlugin(e.actualOptions)&&s.set(t.id,await t.getPlugin(e));return s}getEffectDrawer(e){return this.effectDrawers.get(e)}async getInteractors(e,s=!1){return await p(e,this.interactors,this._initializers.interactors,s)}async getMovers(e,s=!1){return await p(e,this.movers,this._initializers.movers,s)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(s=>s.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.shapeDrawers.get(e)}getSupportedEffects(){return this.effectDrawers.keys()}getSupportedShapes(){return this.shapeDrawers.keys()}async getUpdaters(e,s=!1){return await p(e,this.updaters,this._initializers.updaters,s)}init(){this._initialized||(this._initialized=!0)}async load(e){var v;const t=e.id??((v=e.element)==null?void 0:v.id)??`tsparticles${Math.floor(O()*1e4)}`,{index:r,url:n}=e,o=n?await G({fallback:e.options,url:n,index:r}):e.options;let l=e.element??document.getElementById(t);l||(l=document.createElement("div"),l.id=t,document.body.append(l));const M=x(o,r),f=this.dom(),c=f.findIndex(d=>d.id.description===t),w=0;if(c>=w){const d=this.domItem(c);d&&!d.destroyed&&(d.destroy(),f.splice(c,1))}let a;if(l.tagName.toLowerCase()==="canvas")a=l,a.dataset[g]="false";else{const d=l.getElementsByTagName("canvas");d.length?(a=d[0],a.dataset[g]="false"):(a=document.createElement("canvas"),a.dataset[g]="true",l.appendChild(a))}a.style.width||(a.style.width="100%"),a.style.height||(a.style.height="100%");const{Container:I}=await D(()=>import("./Container-Kobb2VSv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),u=new I(this,t,M);return c>=w?f.splice(c,0,u):f.push(u),u.canvas.loadCanvas(a),await u.start(),u}loadOptions(e,s){for(const t of this.plugins)t.loadOptions(e,s)}loadParticlesOptions(e,s,...t){var n;const r=this.updaters.get(e);if(r)for(const o of r)(n=o.loadOptions)==null||n.call(o,s,...t)}async refresh(e=!0){e&&await Promise.all(this.dom().map(s=>s.refresh()))}removeEventListener(e,s){this._eventDispatcher.removeEventListener(e,s)}setOnClickHandler(e){const s=this.dom();if(!s.length)throw new Error(`${C} can only set click handlers after calling tsParticles.load()`);for(const t of s)t.addClickHandler(e)}}class F{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const s=e.value,t=s.hsl??e.value;if(t.h!==void 0&&t.s!==void 0&&t.l!==void 0)return E(t)}handleRangeColor(e){const s=e.value,t=s.hsl??e.value;if(t.h!==void 0&&t.l!==void 0)return E({h:h(t.h),l:h(t.l),s:h(t.s)})}parseString(e){if(!e.startsWith("hsl"))return;const s=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,t=s.exec(e),r=4,n=1,o=10;return t?S({a:t.length>r?P(t[5]):n,h:parseInt(t[1],o),l:parseInt(t[3],o),s:parseInt(t[2],o)}):void 0}}class j{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const s=e.value,t=s.rgb??e.value;if(t.r!==void 0)return t}handleRangeColor(e){const s=e.value,t=s.rgb??e.value;if(t.r!==void 0)return{r:h(t.r),g:h(t.g),b:h(t.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const s=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,t=s.exec(e),r=10;return t?{a:t.length>4?P(t[5]):1,b:parseInt(t[3],r),g:parseInt(t[2],r),r:parseInt(t[1],r)}:void 0}}function N(){const i=new j,e=new F;y(i),y(e);const s=new V;return s.init(),s}const m=N();A()||(window.tsParticles=m);const W=i=>{const e=i.id??"tsparticles";return L.useEffect(()=>{let s;return m.load({id:e,url:i.url,options:i.options}).then(t=>{var r;s=t,(r=i.particlesLoaded)==null||r.call(i,t)}),()=>{s==null||s.destroy()}},[e,i,i.url,i.options]),k.jsx("div",{id:e,className:i.className})};async function q(i){await i(m)}export{W as Particles,W as default,q as initParticlesEngine};

import{r as R,s as p,n as O,b as v,l as J,m as K,g as P,d as Q,f as U,i as X}from"./NumberUtils-fSLHzFkB.js";import{b as d,i as j}from"./TypeUtils-BOyOcFPO.js";import{b as w}from"./Utils-B52he1Wb.js";const T="random",C="mid",$=new Map;function le(e){$.set(e.key,e)}function Y(e){for(const[,c]of $)if(e.startsWith(c.stringPrefix))return c.parseString(e);const n=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,i=e.replace(n,(c,h,u,f,a)=>h+h+u+u+f+f+(a!==void 0?a+a:"")),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=r.exec(i),t=16;return s?{a:s[4]!==void 0?parseInt(s[4],t)/255:1,b:parseInt(s[3],t),g:parseInt(s[2],t),r:parseInt(s[1],t)}:void 0}function F(e,n,i=!0){if(!e)return;const r=d(e)?{value:e}:e;if(d(r.value))return A(r.value,n,i);if(j(r.value))return F({value:w(r.value,n,i)});for(const[,s]of $){const t=s.handleRangeColor(r);if(t)return t}}function A(e,n,i=!0){if(!e)return;const r=d(e)?{value:e}:e;if(d(r.value))return r.value===T?W():V(r.value);if(j(r.value))return A({value:w(r.value,n,i)});for(const[,s]of $){const t=s.handleColor(r);if(t)return t}}function fe(e,n,i=!0){const r=F(e,n,i);return r?Z(r):void 0}function Z(e){const u=e.r/255,f=e.g/255,a=e.b/255,l=Math.max(u,f,a),g=Math.min(u,f,a),o={h:0,l:(l+g)*.5,s:0};return l!==g&&(o.s=o.l<.5?(l-g)/(l+g):(l-g)/(2-l-g),o.h=u===l?(f-a)/(l-g):o.h=f===l?2+(a-u)/(l-g):2*2+(u-f)/(l-g)),o.l*=100,o.s*=100,o.h*=60,o.h<0&&(o.h+=360),o.h>=360&&(o.h-=360),o}function V(e){return Y(e)}function L(e){const x=(e.h%360+360)%360,b=Math.max(0,Math.min(100,e.s)),c=Math.max(0,Math.min(100,e.l)),h=x/360,u=b/100,f=c/100,a=255,l=3;if(b===0){const m=Math.round(f*a);return{r:m,g:m,b:m}}const g=.5,o=2,D=(m,H,M)=>{if(M<0&&M++,M>1&&M--,M*6<1)return m+(H-m)*6*M;if(M*o<1)return H;if(M*l<1*o){const G=o/l;return m+(H-m)*(G-M)*6}return m},_=1,y=f<g?f*(_+u):f+u-f*u,S=o*f-y,q=1,I=q/l,z=Math.min(a,a*D(S,y,h+I)),B=Math.min(a,a*D(S,y,h)),E=Math.min(a,a*D(S,y,h-I));return{r:Math.round(z),g:Math.round(B),b:Math.round(E)}}function oe(e){const n=L(e);return{a:e.a,b:n.b,g:n.g,r:n.r}}function W(e){return{b:Math.floor(R(p(0,256))),g:Math.floor(R(p(0,256))),r:Math.floor(R(p(0,256)))}}function ue(e,n){return`rgba(${e.r}, ${e.g}, ${e.b}, ${n??1})`}function ge(e,n){return`hsla(${e.h}, ${e.s}%, ${e.l}%, ${n??1})`}function ee(e,n,i,r){let s=e,t=n;return s.r===void 0&&(s=L(e)),t.r===void 0&&(t=L(n)),{b:O(s.b,t.b,i,r),g:O(s.g,t.g,i,r),r:O(s.r,t.r,i,r)}}function me(e,n,i){if(i===T)return W();if(i===C){const r=e.getFillColor()??e.getStrokeColor(),s=(n==null?void 0:n.getFillColor())??(n==null?void 0:n.getStrokeColor());if(r&&s&&n)return ee(r,s,e.getRadius(),n.getRadius());{const t=r??s;if(t)return L(t)}}else return i}function Me(e,n,i){const r=d(e)?e:e.value;return r===T?i?F({value:r}):n?T:C:r===C?C:F({value:r})}function he(e){return e!==void 0?{h:e.h.value,s:e.s.value,l:e.l.value}:void 0}function ce(e,n,i){const r={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return n&&(N(r.h,n.h,i),N(r.s,n.s,i),N(r.l,n.l,i)),r}function N(e,n,i){e.enable=n.enable;const r=0,s=1,t=0,x=0;e.enable?(e.velocity=v(n.speed)/J*i,e.decay=s-v(n.decay),e.status="increasing",e.loops=t,e.maxLoops=v(n.count),e.time=x,e.delayTime=v(n.delay)*K,n.sync||(e.velocity*=P(),e.value*=P()),e.initialValue=e.value,e.offset=p(n.offset)):e.velocity=r}function k(e,n,i,r){if(!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=r.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;const u=e.offset?R(e.offset):0,f=(e.velocity??0)*r.factor+u*3.6,a=e.decay??1,l=Q(n),g=U(n);!i||e.status==="increasing"?(e.value+=f,e.value>l&&(e.loops||(e.loops=0),e.loops++,i?e.status="decreasing":e.value-=l)):(e.value-=f,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing")),e.velocity&&a!==1&&(e.velocity*=a),e.value=X(e.value,g,l)}function xe(e,n){if(!e)return;const{h:i,s:r,l:s}=e,t={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};i&&k(i,t.h,!1,n),r&&k(r,t.s,!0,n),s&&k(s,t.l,!0,n)}export{oe as a,le as b,F as c,ue as d,he as e,Z as f,ge as g,L as h,ee as i,Me as j,me as k,ce as l,fe as r,xe as u};
